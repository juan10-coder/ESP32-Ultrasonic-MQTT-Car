<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="708px" preserveAspectRatio="none" style="width:1388px;height:708px;;" version="1.1" viewBox="0 0 1388 708" width="1388px" zoomAndPan="magnify"><title>Secuencia del sistema ESP32 con HTTP y MQTT</title><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="322.5028" x="528.9154" y="29.9659">Secuencia del sistema ESP32 con HTTP y MQTT</text><rect fill="none" height="127.8241" style="stroke:#000000;stroke-width:1.5;" width="716.5791" x="654.7544" y="480.49"></rect><g><title>Usuario</title><rect fill="#000000" fill-opacity="0.00000" height="501.1782" width="8" x="29.6549" y="124.1358"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="33" x2="33" y1="124.1358" y2="625.314"></line></g><g><title>Cliente HTTP</title><rect fill="#000000" fill-opacity="0.00000" height="501.1782" width="8" x="255.7921" y="124.1358"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="259.7864" x2="259.7864" y1="124.1358" y2="625.314"></line></g><g><title>ESP32</title><rect fill="#000000" fill-opacity="0.00000" height="501.1782" width="8" x="687.7323" y="124.1358"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="690.7544" x2="690.7544" y1="124.1358" y2="625.314"></line></g><g><title>Broker MQTT</title><rect fill="#000000" fill-opacity="0.00000" height="501.1782" width="8" x="1029.5826" y="124.1358"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1032.9098" x2="1032.9098" y1="124.1358" y2="625.314"></line></g><g><title>Suscriptor MQTT</title><rect fill="#000000" fill-opacity="0.00000" height="501.1782" width="8" x="1277.7158" y="124.1358"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1281.0981" x2="1281.0981" y1="124.1358" y2="625.314"></line></g><g class="participant participant-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3098" x="5" y="120.0339">Usuario</text><ellipse cx="33.6549" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"></ellipse><path d="M33.6549,61.5679 L33.6549,88.5679 M20.6549,69.5679 L46.6549,69.5679 M33.6549,88.5679 L20.6549,103.5679 M33.6549,88.5679 L46.6549,103.5679" fill="none" style="stroke:#181818;stroke-width:0.5;"></path></g><g class="participant participant-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.3098" x="5" y="639.28">Usuario</text><ellipse cx="33.6549" cy="651.882" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"></ellipse><path d="M33.6549,659.882 L33.6549,686.882 M20.6549,667.882 L46.6549,667.882 M33.6549,686.882 L20.6549,701.882 M33.6549,686.882 L46.6549,701.882" fill="none" style="stroke:#181818;stroke-width:0.5;"></path></g><g class="participant participant-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166.0114" x="176.7864" y="71"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.6217" x="217.9813" y="92.9659">Cliente HTTP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152.0114" x="183.7864" y="112.0339">(Postman / Navegador)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166.0114" x="176.7864" y="624.314"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.6217" x="217.9813" y="646.28">Cliente HTTP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152.0114" x="183.7864" y="665.3479">(Postman / Navegador)</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.9558" x="664.7544" y="90.0679"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.9558" x="671.7544" y="112.0339">ESP32</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.9558" x="664.7544" y="624.314"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.9558" x="671.7544" y="646.28">ESP32</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.3457" x="982.9098" y="71"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.3457" x="989.9098" y="92.9659">Broker MQTT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.7257" x="995.7198" y="112.0339">(Mosquitto)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.3457" x="982.9098" y="624.314"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.3457" x="989.9098" y="646.28">Broker MQTT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.7257" x="995.7198" y="665.3479">(Mosquitto)</text></g><g class="participant participant-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.2354" x="1202.0981" y="71"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9136" x="1226.759" y="92.9659">Suscriptor MQTT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.2354" x="1209.0981" y="112.0339">(MQTT Explorer / App)</text></g><g class="participant participant-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.2354" x="1202.0981" y="624.314"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9136" x="1226.759" y="646.28">Suscriptor MQTT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.2354" x="1209.0981" y="665.3479">(MQTT Explorer / App)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1381.3335" x="0" y="155.9888"></rect><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1381.3335" y1="155.9888" y2="155.9888"></line><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1381.3335" y1="158.9888" y2="158.9888"></line><rect fill="#EEEEEE" height="25.706" style="stroke:#000000;stroke-width:2;" width="180.0199" x="600.6568" y="144.1358"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162.6399" x="606.6568" y="162.0328">Comando de movimiento</text><g class="message"><polygon fill="#181818" points="247.7921,199.5479,257.7921,203.5479,247.7921,207.5479,251.7921,203.5479" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="33.6549" x2="253.7921" y1="203.5479" y2="203.5479"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.1372" x="40.6549" y="197.7389">Solicita movimiento (ej. adelante)</text></g><g class="message"><polygon fill="#181818" points="679.7323,231.2539,689.7323,235.2539,679.7323,239.2539,683.7323,235.2539" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="259.7921" x2="685.7323" y1="235.2539" y2="235.2539"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="407.9402" x="266.7921" y="229.4449">HTTP POST /move?direccion&#61;adelante&amp;velocidad&#61;200&amp;duracion&#61;3</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="691.7323" x2="733.7323" y1="266.9599" y2="266.9599"></line><line style="stroke:#181818;stroke-width:1;" x1="733.7323" x2="733.7323" y1="266.9599" y2="279.9599"></line><line style="stroke:#181818;stroke-width:1;" x1="692.7323" x2="733.7323" y1="279.9599" y2="279.9599"></line><polygon fill="#181818" points="702.7323,275.9599,692.7323,279.9599,702.7323,283.9599,698.7323,279.9599" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242.3722" x="698.7323" y="261.1509">Ejecuta motores y LEDs según dirección</text></g><g class="message"><polygon fill="#181818" points="1021.5826,307.6659,1031.5826,311.6659,1021.5826,315.6659,1025.5826,311.6659" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="691.7323" x2="1027.5826" y1="311.6659" y2="311.6659"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317.8503" x="698.7323" y="305.8569">Publica mensaje JSON en tópico &#34;carro/movimiento&#34;</text></g><g class="message"><polygon fill="#181818" points="1269.7158,339.3719,1279.7158,343.3719,1269.7158,347.3719,1273.7158,343.3719" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="1033.5826" x2="1275.7158" y1="343.3719" y2="343.3719"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.7022" x="1040.5826" y="337.5629">Reenvía mensaje al suscriptor MQTT</text></g><g class="message"><polygon fill="#181818" points="270.7921,371.0779,260.7921,375.0779,270.7921,379.0779,266.7921,375.0779" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="264.7921" x2="690.7323" y1="375.0779" y2="375.0779"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.5582" x="276.7921" y="369.2689">Responde {&#34;status&#34;:&#34;Movimiento ejecutado&#34;}</text></g><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="691.7323" x2="733.7323" y1="406.784" y2="406.784"></line><line style="stroke:#181818;stroke-width:1;" x1="733.7323" x2="733.7323" y1="406.784" y2="419.784"></line><line style="stroke:#181818;stroke-width:1;" x1="692.7323" x2="733.7323" y1="419.784" y2="419.784"></line><polygon fill="#181818" points="702.7323,415.784,692.7323,419.784,702.7323,423.784,698.7323,419.784" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245.7652" x="698.7323" y="400.975">Detiene motores tras el tiempo indicado</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1381.3335" x="0" y="449.637"></rect><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1381.3335" y1="449.637" y2="449.637"></line><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1381.3335" y1="452.637" y2="452.637"></line><rect fill="#EEEEEE" height="25.706" style="stroke:#000000;stroke-width:2;" width="198.1712" x="591.5812" y="437.784"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180.7912" x="597.5812" y="455.681">Mock del sensor ultrasónico</text><path d="M654.7544,480.49 L728.4585,480.49 L728.4585,490.196 L718.4585,500.196 L654.7544,500.196 L654.7544,480.49" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"></path><rect fill="none" height="127.8241" style="stroke:#000000;stroke-width:1.5;" width="716.5791" x="654.7544" y="480.49"></rect><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.704" x="669.7544" y="495.387">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100.9876" x="743.4585" y="494.2489">[Cada 5 segundos]</text><g class="message"><line style="stroke:#181818;stroke-width:1;" x1="691.7323" x2="733.7323" y1="523.902" y2="523.902"></line><line style="stroke:#181818;stroke-width:1;" x1="733.7323" x2="733.7323" y1="523.902" y2="536.902"></line><line style="stroke:#181818;stroke-width:1;" x1="692.7323" x2="733.7323" y1="536.902" y2="536.902"></line><polygon fill="#181818" points="702.7323,532.902,692.7323,536.902,702.7323,540.902,698.7323,536.902" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.2952" x="698.7323" y="518.093">Genera distancia aleatoria (mock)</text></g><g class="message"><polygon fill="#181818" points="1021.5826,564.608,1031.5826,568.608,1021.5826,572.608,1025.5826,568.608" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="691.7323" x2="1027.5826" y1="568.608" y2="568.608"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308.1912" x="698.7323" y="562.799">Publica {&#34;distancia_cm&#34;: valor} en &#34;carro/distancia&#34;</text></g><g class="message"><polygon fill="#181818" points="1269.7158,596.314,1279.7158,600.314,1269.7158,604.314,1273.7158,600.314" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="1033.5826" x2="1275.7158" y1="600.314" y2="600.314"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224.1332" x="1040.5826" y="594.505">Reenvía distancia a clientes suscritos</text></g></g></svg>